import { GoogleGenerativeAI, HarmCategory, HarmBlockThreshold } from "@google/generative-ai";

const apiKey = import.meta.env.VITE_GOOGLE_GEMINI_API_KEY;
const genAI = new GoogleGenerativeAI(apiKey);

const model = genAI.getGenerativeModel({
  model: "gemini-2.0-flash",
});

const generationConfig = {
  temperature: 1,
  topP: 0.95,
  topK: 40,
  maxOutputTokens: 8192,
  responseMimeType: "application/json",
};

export const chatSession = model.startChat({
    generationConfig,
    history: [
      {
        role: "user",
        parts: [
          {
            text: "Generate Travel Plan for Location : Las Vegas, for 3 Days for Couple with a Cheap budget ,Give me a Hotels options list with Hotel Name(real hotel), Hotel address(real address of that hotel), Price, hotel image url(real image url of that hotel and licensed free), geo coordinates, rating, descriptions and suggest itinerary with place Name, Place Details, Place Image Url, Geo Coordinates, ticket Pricing, Time travel each of the location for 3 days with each day plan with best time(give it as 4:00PM - 5:00PM) to visit the place in JSON format"
          }
        ],
      },
      {
        role: "model",
        parts: [
          {
            text:
              "```json\n{\n  \"tripName\": \"Las Vegas Budget Getaway for Two (3 Days)\",\n  \"budget\": \"Cheap\",\n  \"travelers\": \"Couple\",\n  \"location\": \"Las Vegas, Nevada\",\n  \"hotelOptions\": [\n    {\n      \"hotelName\": \"Circus Circus Hotel, Casino & Theme Park\",\n      \"hotelAddress\": \"2880 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"Around $40 - $80 per night (depending on season)\",\n      \"hotelImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a1/Circus_Circus_Las_Vegas_2018.jpg/1280px-Circus_Circus_Las_Vegas_2018.jpg\",\n      \"hotelImageLicense\": \"CC BY-SA 4.0\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1368,\n        \"longitude\": -115.1657\n      },\n      \"rating\": 3.5,\n      \"description\": \"Budget-friendly option on the Strip with circus-themed attractions and a small amusement park (Adventuredome).  Rooms are basic but generally clean.  Expect crowds and noise.\"\n    },\n    {\n      \"hotelName\": \"Stratosphere Hotel, Casino & Tower\",\n      \"hotelAddress\": \"2000 S Las Vegas Blvd, Las Vegas, NV 89104\",\n      \"price\": \"Around $50 - $90 per night (depending on season)\",\n      \"hotelImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Stratosphere_Hotel_and_Casino_-_Las_Vegas%2C_Nevada.jpg/1280px-Stratosphere_Hotel_and_Casino_-_Las_Vegas%2C_Nevada.jpg\",\n      \"hotelImageLicense\": \"CC BY-SA 3.0\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.1479,\n        \"longitude\": -115.1559\n      },\n      \"rating\": 3.7,\n      \"description\": \"Located at the north end of the Strip. Offers great views from the tower (tower access may have an additional cost). Rooms can be dated, but the price is often competitive. Free parking, a big plus.\"\n    },\n    {\n      \"hotelName\": \"Excalibur Hotel & Casino\",\n      \"hotelAddress\": \"3850 S Las Vegas Blvd, Las Vegas, NV 89109\",\n      \"price\": \"Around $60 - $100 per night (depending on season)\",\n      \"hotelImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b9/Excalibur_Hotel_and_Casino_Panorama.jpg/1280px-Excalibur_Hotel_and_Casino_Panorama.jpg\",\n      \"hotelImageLicense\": \"CC BY-SA 4.0\",\n      \"geoCoordinates\": {\n        \"latitude\": 36.0984,\n        \"longitude\": -115.1742\n      },\n      \"rating\": 4.0,\n      \"description\": \"Medieval-themed hotel with a family-friendly atmosphere.  Good location on the south end of the Strip. Offers a variety of dining and entertainment options.  Rooms are decent and affordable.\"\n    }\n  ],\n  \"itinerary\": {\n    \"day1\": {\n      \"theme\": \"South Strip Exploration & Bellagio Magic\",\n      \"activities\": [\n        {\n          \"placeName\": \"Welcome to Las Vegas Sign\",\n          \"placeDetails\": \"Iconic sign for photo opportunities.  Arrive early to avoid crowds. Free.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/1/17/Welcome_to_Las_Vegas_sign_at_night.jpg/1280px-Welcome_to_Las_Vegas_sign_at_night.jpg\",\n          \"placeImageLicense\": \"CC BY-SA 3.0\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0828,\n            \"longitude\": -115.1731\n          },\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"15-20 minutes from the Strip (driving or rideshare)\",\n          \"bestTimeToVisit\": \"9:00 AM - 10:00 AM\"\n        },\n        {\n          \"placeName\": \"Luxor Hotel & Casino\",\n          \"placeDetails\": \"Explore the interior of the pyramid and see the Sphinx. The atrium is impressive.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/Luxor_Hotel_Las_Vegas.jpg/1280px-Luxor_Hotel_Las_Vegas.jpg\",\n          \"placeImageLicense\": \"CC BY-SA 4.0\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.0956,\n            \"longitude\": -115.1758\n          },\n          \"ticketPricing\": \"Free to enter; attractions inside may have fees.\",\n          \"travelTime\": \"Walking distance from Mandalay Bay or Excalibur.\",\n          \"bestTimeToVisit\": \"11:00 AM - 12:00 PM\"\n        },\n        {\n          \"placeName\": \"Bellagio Conservatory & Botanical Garden\",\n          \"placeDetails\": \"Stunning seasonal floral displays. Free to enter.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/dd/Bellagio_Conservatory_2017.jpg/1280px-Bellagio_Conservatory_2017.jpg\",\n          \"placeImageLicense\": \"CC BY-SA 4.0\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1127,\n            \"longitude\": -115.1762\n          },\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"Take the Strip bus or walk from mid-Strip hotels.\",\n          \"bestTimeToVisit\": \"4:00 PM - 5:00 PM (slightly less crowded than peak hours)\"\n        },\n        {\n          \"placeName\": \"Fountains of Bellagio\",\n          \"placeDetails\": \"Spectacular water show set to music. Free.  Runs frequently in the afternoon and evening.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f2/Bellagio_Fountains_Las_Vegas_01.jpg/1280px-Bellagio_Fountains_Las_Vegas_01.jpg\",\n          \"placeImageLicense\": \"CC BY-SA 4.0\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1126,\n            \"longitude\": -115.1746\n          },\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"Adjacent to the Bellagio Conservatory.\",\n          \"bestTimeToVisit\": \"8:00 PM - 9:00 PM (evening shows are particularly beautiful)\"\n        }\n      ]\n    },\n    \"day2\": {\n      \"theme\": \"Downtown Las Vegas & Free Attractions\",\n      \"activities\": [\n        {\n          \"placeName\": \"Fremont Street Experience\",\n          \"placeDetails\": \"Light show canopy, street performers, and cheaper gambling.  Viva Vision light shows are free.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/5/59/Fremont_Street_Experience_at_night.jpg/1280px-Fremont_Street_Experience_at_night.jpg\",\n          \"placeImageLicense\": \"CC BY-SA 4.0\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1703,\n            \"longitude\": -115.1427\n          },\n          \"ticketPricing\": \"Free (except for certain attractions like the SlotZilla zipline).\",\n          \"travelTime\": \"Take the Deuce bus from the Strip (approx. 30-45 minutes). Rideshare is also an option.\",\n          \"bestTimeToVisit\": \"7:00 PM - 9:00 PM (for the best atmosphere and light shows)\"\n        },\n        {\n          \"placeName\": \"Container Park\",\n          \"placeDetails\": \"Unique shopping and dining area built from shipping containers.  Fun for browsing and people-watching.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b6/Downtown_Container_Park%2C_Las_Vegas.jpg/1280px-Downtown_Container_Park%2C_Las_Vegas.jpg\",\n          \"placeImageLicense\": \"CC BY-SA 4.0\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1703,\n            \"longitude\": -115.1405\n          },\n          \"ticketPricing\": \"Free to enter; cost depends on purchases within.\",\n          \"travelTime\": \"Short walk from Fremont Street.\",\n          \"bestTimeToVisit\": \"5:00 PM - 6:00 PM (before it gets too crowded)\"\n        },\n        {\n          \"placeName\": \"Gold and Silver Pawn Shop (Pawn Stars)\",\n          \"placeDetails\": \"Famous pawn shop from the TV show.  Expect crowds. Free to enter but be prepared to wait in line.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0f/Gold_%26_Silver_Pawn_Shop_%28Las_Vegas%29.jpg/1280px-Gold_%26_Silver_Pawn_Shop_%28Las_Vegas%29.jpg\",\n          \"placeImageLicense\": \"CC BY-SA 4.0\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1752,\n            \"longitude\": -115.1552\n          },\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"Short rideshare from Fremont Street\",\n          \"bestTimeToVisit\": \"2:00 PM - 3:00 PM (try to visit in the early afternoon to avoid the biggest crowds.)\"\n        }\n      ]\n    },\n    \"day3\": {\n      \"theme\": \"Mid-Strip Exploration & High Roller View\",\n      \"activities\": [\n        {\n          \"placeName\": \"The LINQ Promenade\",\n          \"placeDetails\": \"Outdoor shopping, dining, and entertainment district leading to the High Roller observation wheel.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6c/LINQ_Promenade_Las_Vegas.jpg/1280px-LINQ_Promenade_Las_Vegas.jpg\",\n          \"placeImageLicense\": \"CC BY-SA 4.0\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1164,\n            \"longitude\": -115.1708\n          },\n          \"ticketPricing\": \"Free to walk around; individual stores and restaurants have their own prices.\",\n          \"travelTime\": \"Easy access from many mid-Strip hotels.\",\n          \"bestTimeToVisit\": \"11:00 AM - 12:00 PM (for browsing and grabbing lunch)\"\n        },\n        {\n          \"placeName\": \"Coca-Cola Store\",\n          \"placeDetails\": \"Three stories of merchandise and a beverage bar to try all of the international flavors.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Coca-Cola_Store_Las_Vegas_%28Exterior%29.jpg/1280px-Coca-Cola_Store_Las_Vegas_%28Exterior%29.jpg\",\n          \"placeImageLicense\": \"CC BY-SA 4.0\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1109,\n            \"longitude\": -115.1738\n          },\n          \"ticketPricing\": \"Free to enter; beverages and merchandise cost money.\",\n          \"travelTime\": \"Walking distance from the LINQ and other mid-Strip hotels.\",\n          \"bestTimeToVisit\": \"3:00 PM - 4:00 PM\"\n        },\n        {\n          \"placeName\": \"High Roller Observation Wheel (Optional - Budget permitting)\",\n          \"placeDetails\": \"30-minute ride with panoramic views of Las Vegas.  Check for discounts online.  Consider a daytime ride for better visibility.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7e/High_Roller_Observation_Wheel_Las_Vegas_2014.jpg/1280px-High_Roller_Observation_Wheel_Las_Vegas_2014.jpg\",\n          \"placeImageLicense\": \"CC BY-SA 4.0\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1168,\n            \"longitude\": -115.1701\n          },\n          \"ticketPricing\": \"Approximately $25 - $37 per person (depending on time of day and discounts).\",\n          \"travelTime\": \"Located at the end of the LINQ Promenade.\",\n          \"bestTimeToVisit\": \"4:00 PM - 5:00 PM (Day time offers the best visibility, night can be beautiful, but a lot more expensive)\"\n        },\n        {\n          \"placeName\": \"Mirage Volcano\",\n          \"placeDetails\": \"A free, fiery volcano show at the front of the Mirage Hotel. Runs nightly.\",\n          \"placeImageUrl\": \"https://upload.wikimedia.org/wikipedia/commons/thumb/7/7a/Mirage_Volcano_Las_Vegas.jpg/1280px-Mirage_Volcano_Las_Vegas.jpg\",\n          \"placeImageLicense\": \"CC BY-SA 4.0\",\n          \"geoCoordinates\": {\n            \"latitude\": 36.1211,\n            \"longitude\": -115.1742\n          },\n          \"ticketPricing\": \"Free\",\n          \"travelTime\": \"Located on the strip, easily accessible by walking\",\n          \"bestTimeToVisit\": \"8:00 PM - 9:00 PM (Show times vary, check the Mirage website)\"\n        }\n      ]\n    }\n  },\n  \"notes\": [\n    \"This itinerary focuses on free and low-cost activities.\",\n    \"Transportation: Utilize the Deuce bus for affordable travel along the Strip and to Downtown.  Consider rideshare for specific destinations but be mindful of surge pricing.\",\n    \"Food: Take advantage of affordable dining options like food courts, fast food, and happy hour specials.\",\n    \"Always check the latest pricing and show schedules online before your trip.\",\n    \"Wear comfortable shoes â€“ you'll be doing a lot of walking!\",\n    \"Stay hydrated, especially during the warmer months.\",\n    \"Take advantage of free hotel amenities like pools (if available).\",\n    \"Gamble Responsibly\"\n  ]\n}\n```\n"
          }
        ],
      }
    ],
  });
